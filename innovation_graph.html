<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud vs. AI vs. Social Media Innovation & Adoption Rates</title>
    <!-- Tailwind CSS CDN for basic styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN for drawing the graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .chart-container {
            background-color: #ffffff;
            border-radius: 12px; /* Rounded corners */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            padding: 24px;
            max-width: 1000px; /* Increased max-width for better display */
            width: 100%;
            height: auto; /* Allow height to adjust */
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            max-width: 100%;
            height: auto;
        }
        .disclaimer {
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* text-gray-500 */
            margin-top: 20px;
            text-align: center;
        }
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            position: relative;
        }
        .modal-close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6; /* Blue spinner */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Comparison of AI/Cloud/Social Media Innovation & Adoption Rates</h1>
        <div class="mb-6 text-gray-700 text-center">
            <p class="mb-2">
                The graph illustrates two key metrics for each technology:
            </p>
            <p class="mb-1">
                <span class="font-semibold text-gray-800">Innovation Rate (Solid Lines):</span> Represents the pace and impact of innovative shifts within the technology. Indicates how quickly tech companies are releasing new ways to use the technology.
            </p>
            <p>
                <span class="font-semibold text-gray-800">Adoption Rate (Dashed Lines):</span> Reflects how widely and quickly the technology is being embraced and integrated into daily lives. Indicates the pace at which people are accepting and using the technology.
            </p>
        </div>
        <div class="relative w-full h-96 md:h-[500px]"> <!-- Responsive height for canvas -->
            <canvas id="innovationChart"></canvas>
        </div>
        <p class="disclaimer">
            *Note: These rates are subjective scores (1-10) based on the density and impact of major events and widespread usage. They serve as visual representations for comparative purposes rather than precise quantitative measurements. Click on a point to get an explanation of the event! Created with the help of Google Gemini Flash 2.5
        </p>
    </div>

    <!-- Explanation Modal -->
    <div id="explanationModal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close-button" onclick="closeModal()">&times;</button>
            <h2 id="modalTitle" class="text-2xl font-semibold text-gray-800 mb-4"></h2>
            <div id="modalContent" class="text-gray-700">
                <div id="loadingSpinner" class="loading-spinner hidden"></div>
                <p id="explanationText"></p>
            </div>
        </div>
    </div>

    <script>
        // Utility functions for TTS conversion (included as per instructions, though not directly used by this text generation feature)
        function base64ToArrayBuffer(base64) {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        function pcmToWav(pcm16, sampleRate) {
            const pcmData = pcm16.buffer;
            const wavBuffer = new ArrayBuffer(44 + pcmData.byteLength);
            const view = new DataView(wavBuffer);

            // RIFF identifier
            writeString(view, 0, 'RIFF');
            // file length
            view.setUint32(4, 36 + pcmData.byteLength, true);
            // RIFF type
            writeString(view, 8, 'WAVE');
            // format chunk identifier
            view.setUint32(16, 16, true);
            // sample format (raw PCM)
            view.setUint16(20, 1, true);
            // channel count
            view.setUint16(22, 1, true);
            // sample rate
            view.setUint32(24, sampleRate, true);
            // byte rate (sample rate * block align)
            view.setUint32(28, sampleRate * 2, true);
            // block align (channel count * bytes per sample)
            view.setUint16(32, 2, true);
            // bits per sample
            view.setUint16(34, 16, true);
            // data chunk identifier
            writeString(view, 36, 'data');
            // data chunk length
            view.setUint32(40, pcmData.byteLength, true);

            const pcmView = new Int16Array(pcmData);
            for (let i = 0; i < pcmView.length; i++) {
                view.setInt16(44 + i * 2, pcmView[i], true);
            }

            return new Blob([view], { type: 'audio/wav' });
        }

        function writeString(view, offset, string) {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        }

        // Data for the chart, representing a qualitative innovation rate (1-10) over years.
        // This data is a subjective interpretation based on the provided timeline.
        const years = Array.from({ length: 2027 - 1995 + 1 }, (_, i) => 1995 + i); // Extended to 1995

        // --- Innovation Rates ---
        const cloudInnovation = [
            0.5, 0.7, 0.9, 1.1, 1.3, // 1995-1999: Early internet, pre-commercial cloud
            1, 1.2, 1.4, 1.6, 1.8, // 2000-2004: Early concepts, foundational work
            2, // 2005
            4, // 2006: AWS S3/EC2 launch - significant jump
            4.5, 5, // 2007-2008: Google App Engine, more services
            5.5, 6, // 2009-2010: Azure, OpenStack
            6.5, 7, // 2011-2012: Oracle Cloud, wider adoption, hybrid concepts
            7.5, // 2013: Docker, containers gaining traction
            7.8, 8, // 2014-2015: Continued maturity, serverless gaining
            8.2, 8.5, // 2016-2017: Enterprise adoption, more refined services
            8.7, 9, // 2018-2019: Cloud-native widespread, optimization
            9.2, // 2020: Pandemic accelerates adoption
            9.4, // 2021
            9.6, // 2022: AI integration starts, specialized cloud services
            9.7, // 2023: AI-driven cloud infrastructure investment
            9.8, // 2024: Further optimization for AI, edge computing
            10, // 2025: Deep AI integration, specialized hardware, quantum computing emergence
            10.1, // 2026: Projected continued strong growth, standardization
            10.2 // 2027: Projected sustained high rate, deeper AI agent integration in cloud management
        ];

        const aiInnovation = [
            0.1, 0.1, 0.2, 0.2, 0.3, // 1995-1999: Very early AI research, limited impact
            0.5, 0.6, 0.7, 0.8, 0.9, // 2000-2004: Basic research, slow progress
            1, // 2005
            1.1, 1.2, // 2006-2007
            1.3, 1.4, // 2008-2009
            1.5, // 2010
            1.6, 1.7, // 2011-2012
            2, // 2013: Deep Learning resurgence begins
            2.3, 2.5, // 2014-2015
            2.8, 3, // 2016-2017: Transformers architecture
            3.5, 4, // 2018-2019: GPT-2, early image generation
            6, // 2020: GPT-3 - major jump
            7, // 2021
            9, // 2022: DALL-E 2, ChatGPT - explosive growth
            9.5, // 2023: GPT-4, multimodal, open-source LLMs
            9.8, // 2024: GPT-4o, Sora, more agents, DeepSeek, Qwen
            10, // 2025: Grok 5, Gemini 2.5, widespread agentic AI, advanced multimodal
            10.3, // 2026: Projected continued explosive growth, AGI research, new multimodal
            10.5 // 2027: Projected sustained hyper-growth, breakthroughs in reasoning, self-improving AI
        ];

        const socialMediaInnovation = [
            1.5, // 1995: Classmates.com
            2, // 1996
            2.5, // 1997: SixDegrees.com, AIM
            2.8, 3, // 1998-1999
            3.5, // 2000: Hot or Not
            3.8, // 2001
            4.2, // 2002: Friendster
            4.8, // 2003: MySpace, LinkedIn
            5.5, // 2004: Facebook founded
            6.2, // 2005: YouTube founded, Facebook expands
            7, // 2006: Twitter, Facebook News Feed
            7.5, // 2007: First iPhone, Tumblr
            7.8, // 2008
            8.2, // 2009: Grindr
            8.7, // 2010: Instagram, Pinterest
            9.0, // 2011: Snapchat
            9.2, // 2012
            9.4, // 2013: Vine
            9.5, // 2014
            9.6, // 2015
            9.8, // 2016: TikTok
            9.9, // 2017: AI in feeds, influencer marketing
            9.95, // 2018
            10, // 2019: Peak saturation, global scale, deep integration
            9.8, // 2020: Maturation, focus on existing features
            9.7, // 2021
            9.6, // 2022
            9.5, // 2023
            9.4, // 2024
            9.3, // 2025: Continued high impact, but innovation pace slightly moderated
            9.2, // 2026: Projected slight moderation as core features become ubiquitous
            9.1 // 2027: Projected continued high impact, but innovation largely incremental
        ];

        // --- Adoption Rates ---
        const cloudAdoption = [
            0.1, 0.2, 0.3, 0.5, 0.8, // 1995-1999: Very low, niche, early internet
            1.0, 1.5, 2.0, 2.5, 3.0, // 2000-2004: Slow enterprise exploration
            3.5, // 2005
            4.5, // 2006: AWS launches, early adopters
            5.0, 5.5, // 2007-2008: Google App Engine, more awareness
            6.0, 6.5, // 2009-2010: Azure, OpenStack, increasing enterprise interest
            7.0, 7.5, // 2011-2012: Wider enterprise adoption, hybrid cloud concepts
            8.0, // 2013: Docker, containers ease adoption
            8.5, 8.8, // 2014-2015: Mainstream enterprise adoption
            9.0, 9.2, // 2016-2017: Cloud-first strategies, significant migration
            9.4, 9.6, // 2018-2019: Multi-cloud, deep integration
            9.8, // 2020: Pandemic accelerates, essential infrastructure
            9.9, // 2021
            9.95, // 2022: Near ubiquitous for enterprises
            10, // 2023: Full normalization, AI-driven demand
            10, // 2024: Sustained high adoption, optimization
            10, // 2025: Ubiquitous, focus on specific workloads
            10, // 2026: Continued saturation, incremental growth
            10 // 2027: Deeply embedded, foundational
        ];

        const aiAdoption = [
            0.05, 0.05, 0.05, 0.05, 0.1, // 1995-1999: Almost non-existent, academic
            0.1, 0.1, 0.1, 0.1, 0.1, // 2000-2004: Very niche, academic research
            0.1, // 2005
            0.1, 0.1, // 2006-2007
            0.1, 0.1, // 2008-2009
            0.2, // 2010
            0.3, 0.4, // 2011-2012
            0.5, // 2013: Early ML in specific enterprise areas
            0.8, 1.2, // 2014-2015: More enterprise experimentation
            1.8, 2.5, // 2016-2017: Early AI tools, more awareness
            3.5, 5.0, // 2018-2019: AI embedded in products, some enterprise adoption
            6.5, // 2020: Increased awareness, early generative AI
            7.5, // 2021
            8.5, // 2022: ChatGPT launch - massive public awareness
            9.5, // 2023: Widespread public and early enterprise adoption of generative AI
            9.8, // 2024: Rapid enterprise integration, consumer tools
            10, // 2025: Near ubiquitous, essential for many tasks
            10.2, // 2026: Continued rapid integration, new use cases
            10.5 // 2027: Deeply embedded, transformative
        ];

        const socialMediaAdoption = [
            1.0, // 1995: Classmates.com, early online communities
            1.5, // 1996
            2.0, // 1997: SixDegrees.com, AIM - early networking
            2.5, 3.0, // 1998-1999
            3.8, // 2000: Hot or Not, early user-generated content
            4.5, // 2001
            5.5, // 2002: Friendster - first major social network
            6.5, // 2003: MySpace, LinkedIn - rapid growth
            7.5, // 2004: Facebook founded, expanding reach
            8.5, // 2005: YouTube, Facebook expands rapidly
            9.0, // 2006: Twitter, Facebook News Feed - mainstream
            9.5, // 2007: iPhone, mobile access, rapid user growth
            9.7, // 2008
            9.8, // 2009: Grindr, niche platforms grow
            9.9, // 2010: Instagram, Pinterest - visual content boom
            9.95, // 2011: Snapchat, mobile-first
            10, // 2012: Near saturation in developed markets
            10, // 2013: Sustained high adoption, global reach
            10, // 2014
            10, // 2015
            10, // 2016: TikTok - new wave of engagement
            10, // 2017: AI in feeds, influencer marketing
            10, // 2018
            10, // 2019: Ubiquitous, deeply integrated into daily life
            10, // 2020: Continued high usage
            10, // 2021
            10, // 2022
            10, // 2023
            10, // 2024
            10, // 2025: Sustained high saturation
            10, // 2026: Continued saturation
            10 // 2027: Deeply embedded
        ];


        const ctx = document.getElementById('innovationChart').getContext('2d');
        const innovationChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: years,
                datasets: [{
                    label: 'Cloud Computing Innovation Rate',
                    data: cloudInnovation,
                    borderColor: 'rgb(75, 192, 192)', // Teal color
                    backgroundColor: 'rgba(75, 192, 192, 0.1)',
                    tension: 0.3,
                    fill: false,
                    pointRadius: 4,
                    pointHoverRadius: 7,
                    pointBackgroundColor: 'rgb(75, 192, 192)'
                }, {
                    label: 'Cloud Computing Adoption Rate',
                    data: cloudAdoption,
                    borderColor: 'rgb(75, 192, 192)',
                    backgroundColor: 'rgba(75, 192, 192, 0.05)',
                    borderDash: [5, 5], // Dashed line
                    tension: 0.3,
                    fill: false,
                    pointRadius: 3,
                    pointHoverRadius: 6,
                    pointBackgroundColor: 'rgb(75, 192, 192, 0.5)'
                }, {
                    label: 'AI Innovation Rate',
                    data: aiInnovation,
                    borderColor: 'rgb(255, 99, 132)', // Red color
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    tension: 0.3,
                    fill: false,
                    pointRadius: 4,
                    pointHoverRadius: 7,
                    pointBackgroundColor: 'rgb(255, 99, 132)'
                }, {
                    label: 'AI Adoption Rate',
                    data: aiAdoption,
                    borderColor: 'rgb(255, 99, 132)',
                    backgroundColor: 'rgba(255, 99, 132, 0.05)',
                    borderDash: [5, 5], // Dashed line
                    tension: 0.3,
                    fill: false,
                    pointRadius: 3,
                    pointHoverRadius: 6,
                    pointBackgroundColor: 'rgb(255, 99, 132, 0.5)'
                }, {
                    label: 'Social Media Innovation Rate',
                    data: socialMediaInnovation,
                    borderColor: 'rgb(54, 162, 235)', // Blue color
                    backgroundColor: 'rgba(54, 162, 235, 0.1)',
                    tension: 0.3,
                    fill: false,
                    pointRadius: 4,
                    pointHoverRadius: 7,
                    pointBackgroundColor: 'rgb(54, 162, 235)'
                }, {
                    label: 'Social Media Adoption Rate',
                    data: socialMediaAdoption,
                    borderColor: 'rgb(54, 162, 235)',
                    backgroundColor: 'rgba(54, 162, 235, 0.05)',
                    borderDash: [5, 5], // Dashed line
                    tension: 0.3,
                    fill: false,
                    pointRadius: 3,
                    pointHoverRadius: 6,
                    pointBackgroundColor: 'rgb(54, 162, 235, 0.5)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Qualitative Innovation vs. Adoption Rate Comparison (1-10 Scale)',
                        font: {
                            size: 18,
                            weight: 'bold'
                        },
                        color: '#374151'
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            title: function(context) {
                                return 'Year: ' + context[0].label;
                            },
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += Math.round(context.raw * 10) / 10;
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Year',
                            font: {
                                size: 14,
                                weight: 'bold'
                            },
                            color: '#4b5563'
                        },
                        grid: {
                            color: '#e5e7eb'
                        },
                        ticks: {
                            color: '#4b5563'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Rate (1-10)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            },
                            color: '#4b5563'
                        },
                        min: 0,
                        max: 11,
                        ticks: {
                            stepSize: 1,
                            color: '#4b5563'
                        },
                        grid: {
                            color: '#e5e7eb'
                        }
                    }
                },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const datasetIndex = elements[0].datasetIndex;
                        const index = elements[0].index;
                        const year = years[index];
                        const label = innovationChart.data.datasets[datasetIndex].label;

                        let technology;
                        let rateType;

                        if (label.includes('Cloud Computing')) {
                            technology = 'Cloud Computing';
                        } else if (label.includes('AI')) {
                            technology = 'AI';
                        } else if (label.includes('Social Media')) {
                            technology = 'Social Media';
                        }

                        if (label.includes('Innovation Rate')) {
                            rateType = 'innovation';
                        } else if (label.includes('Adoption Rate')) {
                            rateType = 'adoption';
                        }
                        
                        if (technology && rateType) {
                            getExplanation(year, technology, rateType);
                        }
                    }
                }
            }
        });

        // Handle canvas resizing for responsiveness
        window.addEventListener('resize', () => {
            innovationChart.resize();
        });

        // Modal functions
        const explanationModal = document.getElementById('explanationModal');
        const modalTitle = document.getElementById('modalTitle');
        const explanationText = document.getElementById('explanationText');
        const loadingSpinner = document.getElementById('loadingSpinner');

        function showModal() {
            explanationModal.classList.remove('hidden');
        }

        function closeModal() {
            explanationModal.classList.add('hidden');
            explanationText.textContent = ''; // Clear content
            loadingSpinner.classList.add('hidden'); // Hide spinner
        }

        async function getExplanation(year, technology, rateType) {
            showModal();
            modalTitle.textContent = `${rateType.charAt(0).toUpperCase() + rateType.slice(1)} in ${technology} - Year ${year}`;
            explanationText.textContent = '';
            loadingSpinner.classList.remove('hidden');

            // Constructing a more specific prompt for the LLM
            const prompt = `Provide a concise, 3-4 sentence explanation for the qualitative ${rateType} rate of ${technology} in the year ${year}, based on major historical events and trends. For example, mention key product launches, significant shifts in usage, or foundational technological advancements.`;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            // The API key is now fetched from a secure proxy endpoint.
            // Replace '/api/gemini-proxy' with the actual URL of your deployed serverless function.
            const proxyUrl = '/.netlify/functions/gemini-proxy'; // This is a placeholder.

            let retries = 0;
            const maxRetries = 5;
            let delay = 1000; // 1 second

            while (retries < maxRetries) {
                try {
                    const response = await fetch(proxyUrl, { // Call your proxy endpoint
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: prompt }) // Send the prompt to your proxy
                    });

                    if (response.status === 429) { // Too Many Requests
                        retries++;
                        delay *= 2; // Exponential backoff
                        await new Promise(res => setTimeout(res, delay));
                        continue;
                    }

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error(`Proxy Error (${response.status}):`, errorData);
                        explanationText.textContent = `Proxy Error: ${errorData.message || 'Unknown error from proxy. Check console for details.'}`;
                        break;
                    }

                    const result = await response.json(); // The proxy should return the Gemini API's result
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        explanationText.textContent = text;
                    } else {
                        explanationText.textContent = `Could not generate an explanation. Unexpected response from proxy.`;
                        console.warn('Unexpected proxy response structure:', result);
                    }
                    break;
                } catch (error) {
                    console.error('Network or proxy call failed:', error);
                    explanationText.textContent = 'Failed to connect to the explanation service. Please check your network or proxy setup.';
                    break;
                } finally {
                    loadingSpinner.classList.add('hidden');
                }
            }
            if (retries === maxRetries) {
                explanationText.textContent = 'Failed to fetch explanation after multiple retries. Please ensure your proxy is correctly deployed and configured.';
            }
        }
    </script>
</body>
</html>